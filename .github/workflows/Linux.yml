name: Linux

on: [push, pull_request]

strategy:
    matrix:
        compiler: [gcc, clang]
        cmake_flags: [-DBUILD_SHARED_LIBS=FALSE, -DBUILD_SHARED_LIBS=TRUE]

jobs:
    build:
        uses: actions/checkout@v2
        runs-on: ubuntu-latest
            
        steps:
        - name: prep
            run: mkdir build && cd build

        - name: config
            run: cmake .. ${{matrix.cmake_flags}} |
                -DCMAKE_CXX_COMPILER=${{matrix.compiler}} |
                -DCMAKE_INSTALL_PREFIX=../install |
                -DSFML_BUILD_EXAMPLES=TRUE |
                -DCMAKE_VERBOSE_MAKEFILE=ON |
                -DSFML_BUILD_TEST_SUITE=TRUE 
        - name: build
            run: cmake --build . --target install